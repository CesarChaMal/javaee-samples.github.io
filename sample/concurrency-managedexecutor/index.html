<!DOCTYPE html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>JavaEE Sample::Concurrency::Managedexecutor</title><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css"><link rel="stylesheet" href="/stylesheets/foundation-icons.css"><link rel="stylesheet" href="/stylesheets/app.css"><script src="/javascripts/vendor/custom.modernizr.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="author" type="text/plain" href="/humans.txt"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="/">JavaEE Samples</a></h1></li><li class="toggle-topbar"><a href="#"><i class="fi-home"></i></a></li></ul><section class="top-bar-section"><ul class="right"><li class="divider"><li><a href="/contributors">Contributors <i class="fi-torsos-male-female"></i></a></li></li></ul></section></nav><div class="container"><header><div class="row"><div class="large-10 columns"><h2>Managedexecutor</h2></div><div class="large-2 columns"><div class="action right"><a class="button radius round success" data-reveal-id="run">Run <i class="fi-play"></i></a><div id="run" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to run the sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/concurrency/managedexecutor/">javaee7-samples</a> <i class="fi-social-github"></i>GitHub repository. The first thing we need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="highlight"><code>git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/concurrency/managedexecutor/</code></pre>Now we are ready to start testing. You can run all the tests in this sample by executing:<pre class="highlight"><code>mvn test</code></pre>Or you can run individual tests by executing one of the following:<pre class="highlight"><code>mvn test -Dtest=ExecutorInjectTestmvn test -Dtest=ExecutorJNDITest</code></pre></hr></div></div></div></div><div class="row"><div class="large-10 columns"><h3></h3></div></div><div class="sub"><div class="row"><div class="large-10 columns specifications"><ul class="inline-list"><li>Specifications in use:</li><li><ul class="inline-list"></ul><li><a href="/#CDI">CDI</a></li><li><a href="/#Concurrency">Concurrency</a></li><li><a href="/#EJB">EJB</a></li><li><a href="/#JTA">JTA</a></li></li></ul></div><div class="large-2 columns contributors"><ul class="inline-list"><li><img class="photo" title="Arun Gupta" src="http://gravatar.com/avatar/268f57c236bb50c0f6e12ac38adc9d81?s=25"></li><li><img class="photo" title="Aslak Knutsen" src="http://gravatar.com/avatar/3f27861ec08730fd02c91fe4129d2668?s=25"></li><li><img class="photo" title="Roberto Cortez" src="http://gravatar.com/avatar/d9a06fda174419c0dffb982f226518c2?s=25"></li></ul></div></div></div><script type="text/javascript">//$(function() { activateGuideMenuControl() })</script></header><div class="row"><div class="large-12 columns"><div id="test"><h4><span>ExecutorInjectTest</span><a class="right" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java"><i class="fi-page-edit"></i></a></h4><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="improve">Missing a description for the deployment. Add some javadoc to the @Deployment method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Deployment
public static WebArchive createDeployment() {
    return ShrinkWrap.create(WebArchive.class).
            addClasses(MyRunnableTask.class,
                    MyCallableTask.class,
                    Product.class,
                    TestStatus.class,
                    MyTaskWithListener.class,
                    MyTaskWithTransaction.class,
                    MyTransactionScopedBean.class,
                    TestBean.class).
            setWebXML(new FileAsset(new File("src/main/webapp/WEB-INF/web.xml"))).
            addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml"); // Adding beans.xml shouldn't be required? WildFly Beta1
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithRunnableDefault() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    defaultExecutor.submit(runnableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithCallableDefault() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    Future&lt;Product&gt; future = defaultExecutor.submit(callableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
    assertEquals(1, future.get().getId());
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAllWithCallableDefault() throws Exception {
    List&lt;Future&lt;Product&gt;&gt; results = defaultExecutor.invokeAll(callableTasks);
    int count = 0;
    for (Future&lt;Product&gt; f : results) {
        assertEquals(count++, f.get().getId());
    }
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAnyWithCallableDefault() throws Exception {
    Product results = defaultExecutor.invokeAny(callableTasks);
    assertTrue(results.getId() &gt;= 0);
    assertTrue(results.getId() &lt;= 5);
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithRunnableNoName() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    executorNoName.submit(runnableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithCallableNoName() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    Future&lt;Product&gt; future = executorNoName.submit(callableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
    assertEquals(1, future.get().getId());
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAllWithCallableNoName() throws Exception {
    List&lt;Future&lt;Product&gt;&gt; results = executorNoName.invokeAll(callableTasks);
    int count = 0;
    for (Future&lt;Product&gt; f : results) {
        assertEquals(count++, f.get().getId());
    }
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAnyWithCallableNoName() throws Exception {
    Product results = executorNoName.invokeAny(callableTasks);
    assertTrue(results.getId() &gt;= 0);
    assertTrue(results.getId() &lt;= 5);
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithRunnableFromWebXML() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    executorFromWebXml.submit(new MyRunnableTask());
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithCallableFromWebXML() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    Future&lt;Product&gt; future = executorFromWebXml.submit(new MyCallableTask(1));
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
    assertEquals(1, future.get().getId());
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAllWithCallableFromWebXML() throws Exception {
    List&lt;Future&lt;Product&gt;&gt; results = executorFromWebXml.invokeAll(callableTasks);
    int count = 0;
    for (Future&lt;Product&gt; f : results) {
        assertEquals(count++, f.get().getId());
    }
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAnyWithCallableFromWebXML() throws Exception {
    Product results = executorFromWebXml.invokeAny(callableTasks);
    assertTrue(results.getId() &gt;= 0);
    assertTrue(results.getId() &lt;= 5);
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithListener() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    defaultExecutor.submit(taskWithListener);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithTransaction() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    defaultExecutor.submit(taskWithTransaction);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
    assertTrue(TestStatus.foundTransactionScopedBean);
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorInjectTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithEJB() throws Exception {
    assertTrue(ejb.doSomething());
}</code></pre>
</div>
</div></div><div id="test"><h4><span>ExecutorJNDITest</span><a class="right" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java"><i class="fi-page-edit"></i></a></h4><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="improve">Missing a description for the deployment. Add some javadoc to the @Deployment method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Deployment
public static WebArchive createDeployment() {
    return ShrinkWrap.create(WebArchive.class).
            addClasses(MyRunnableTask.class,
                    MyCallableTask.class,
                    Product.class,
                    TestStatus.class);
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithRunnableDefault() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    defaultExecutor.submit(runnableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testSubmitWithCallableDefault() throws Exception {
    TestStatus.latch = new CountDownLatch(1);
    Future&lt;Product&gt; future = defaultExecutor.submit(callableTask);
    assertTrue(TestStatus.latch.await(2000, TimeUnit.MILLISECONDS));
    assertEquals(1, future.get().getId());
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAllWithCallableDefault() throws Exception {
    List&lt;Future&lt;Product&gt;&gt; results = defaultExecutor.invokeAll(callableTasks);
    int count = 0;
    for (Future&lt;Product&gt; f : results) {
        assertEquals(count++, f.get().getId());
    }
}</code></pre>
</div>
</div><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/concurrency/managedexecutor/src/test/java/org/javaee7/concurrency/managedexecutor/ExecutorJNDITest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void testInvokeAnyWithCallableDefault() throws Exception {
    Product results = defaultExecutor.invokeAny(callableTasks);
    assertTrue(results.getId() &gt;= 0);
    assertTrue(results.getId() &lt;= 5);
}</code></pre>
</div>
</div></div><script type="text/javascript">$(function() {
  hljs.initHighlightingOnLoad();
})</script></div></div><div id="improve" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to help improve this sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/concurrency/managedexecutor/">javaee7-samples</a> <i class="fi-social-github"></i>GitHub repository. The first thing you need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="highlight"><code>git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/concurrency/managedexecutor/</code></pre><p>Do the changes as you see fit and send a pull request!</p><p>Good Luck!</p></hr></div></div><footer style="max-width: 100%"><div class="row"><div class="large-6 columns" style="margin-bottom: .75em; margin-top: .75em"><ul class="unstyled"><li>&#169; Copyright 2013-2014 JavaEE Samples.</li><li><i class="fi-like"></i>&nbsp;Mixed with <a href="http://foundation.zurb.com/">Foundation</a>. Baked by <a href="|http://awestruct.org">Awestruct</a>.</li><li><i class="fi-share"></i>&nbsp;Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</li></ul></div></div></footer><script src="/javascripts/foundation/foundation.js"></script><script src="/javascripts/foundation/foundation.topbar.js"></script><script src="/javascripts/foundation/foundation.reveal.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/pojoaque.css"><script type="text/javascript">$(document).foundation()</script><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-18727998-5']);
_gaq.push(['_trackPageview']);
(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
!function($,window,document){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0,init:!1},init:function(section,method,options){Foundation.inherit(this,"data_options addCustomRule");var self=this;return"object"==typeof method?$.extend(!0,this.settings,method):"undefined"!=typeof options&&$.extend(!0,this.settings,options),"string"!=typeof method?($(".top-bar, [data-topbar]").each(function(){$.extend(!0,self.settings,self.data_options($(this))),self.settings.$w=$(window),self.settings.$topbar=$(this),self.settings.$section=self.settings.$topbar.find("section"),self.settings.$titlebar=self.settings.$topbar.children("ul").first(),self.settings.$topbar.data("index",0);var topbarContainer=self.settings.$topbar.parent();topbarContainer.hasClass("fixed")||topbarContainer.hasClass(self.settings.stickyClass)?(self.settings.$topbar.data("height",self.outerHeight(topbarContainer)),self.settings.$topbar.data("stickyoffset",topbarContainer.offset().top)):self.settings.$topbar.data("height",self.outerHeight(self.settings.$topbar));var breakpoint=$("<div class='top-bar-js-breakpoint'/>").insertAfter(self.settings.$topbar);self.settings.breakPoint=breakpoint.width(),breakpoint.remove(),self.assemble(),self.settings.is_hover&&self.settings.$topbar.find(".has-dropdown").addClass("not-click"),self.addCustomRule(".f-topbar-fixed { padding-top: "+self.settings.$topbar.data("height")+"px }"),self.settings.$topbar.parent().hasClass("fixed")&&$("body").addClass("f-topbar-fixed")}),self.settings.init||this.events(),this.settings.init):this[method].call(this,options)},toggle:function(){var self=this,topbar=$(".top-bar, [data-topbar]"),section=topbar.find("section, .section");self.breakpoint()&&(self.rtl?(section.css({right:"0%"}),section.find(">.name").css({right:"100%"})):(section.css({left:"0%"}),section.find(">.name").css({left:"100%"})),section.find("li.moved").removeClass("moved"),topbar.data("index",0),topbar.toggleClass("expanded").css("height","")),self.settings.scrolltop?topbar.hasClass("expanded")?topbar.parent().hasClass("fixed")&&(self.settings.scrolltop?(topbar.parent().removeClass("fixed"),topbar.addClass("fixed"),$("body").removeClass("f-topbar-fixed"),window.scrollTo(0,0)):topbar.parent().removeClass("expanded")):topbar.hasClass("fixed")&&(topbar.parent().addClass("fixed"),topbar.removeClass("fixed"),$("body").addClass("f-topbar-fixed")):(topbar.parent().hasClass(self.settings.stickyClass)&&topbar.parent().addClass("fixed"),topbar.parent().hasClass("fixed")&&(topbar.hasClass("expanded")?(topbar.addClass("fixed"),topbar.parent().addClass("expanded")):(topbar.removeClass("fixed"),topbar.parent().removeClass("expanded"),self.updateStickyPositioning())))},timer:null,events:function(){var self=this;$(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(e){e.preventDefault(),self.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(e){{var li=$(this),target=$(e.target),topbar=li.closest("[data-topbar], .top-bar");topbar.data("topbar")}return target.data("revealId")?void self.toggle():void(self.breakpoint()||(!self.settings.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),"A"===target[0].nodeName&&target.parent().hasClass("has-dropdown")&&e.preventDefault(),li.hasClass("hover")?(li.removeClass("hover").find("li").removeClass("hover"),li.parents("li.hover").removeClass("hover")):li.addClass("hover")))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(e){if(self.breakpoint()&&$(window).width()!=self.settings.breakPoint){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section"),$selectedLi=($this.next(".dropdown").outerHeight(),$this.closest("li"));topbar.data("index",topbar.data("index")+1),$selectedLi.addClass("moved"),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),topbar.css("height",self.outerHeight($this.siblings("ul"),!0)+self.settings.$topbar.data("height"))}}),$(window).on("resize.fndtn.topbar",function(){if("undefined"!=typeof self.settings.$topbar){var stickyOffset,stickyContainer=self.settings.$topbar.parent("."+this.settings.stickyClass);if(!self.breakpoint()){var doToggle=self.settings.$topbar.hasClass("expanded");$(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover"),doToggle&&self.toggle()}stickyContainer.length>0&&(stickyContainer.hasClass("fixed")?(stickyContainer.removeClass("fixed"),stickyOffset=stickyContainer.offset().top,$(document.body).hasClass("f-topbar-fixed")&&(stickyOffset-=self.settings.$topbar.data("height")),self.settings.$topbar.data("stickyoffset",stickyOffset),stickyContainer.addClass("fixed")):(stickyOffset=stickyContainer.offset().top,self.settings.$topbar.data("stickyoffset",stickyOffset)))}}.bind(this)),$("body").on("click.fndtn.topbar",function(e){var parent=$(e.target).closest("li").closest("li.hover");parent.length>0||$(".top-bar li, [data-topbar] li").removeClass("hover")}),$(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(e){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section"),$movedLi=$this.closest("li.moved"),$previousLevelUl=$movedLi.parent();topbar.data("index",topbar.data("index")-1),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),0===topbar.data("index")?topbar.css("height",""):topbar.css("height",self.outerHeight($previousLevelUl,!0)+self.settings.$topbar.data("height")),setTimeout(function(){$movedLi.removeClass("moved")},300)})},breakpoint:function(){return $(document).width()<=this.settings.breakPoint||$("html").hasClass("lt-ie9")},assemble:function(){var self=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var $link=$(this),$dropdown=$link.siblings(".dropdown"),url=$link.attr("href");if(self.settings.mobile_show_parent_link&&url&&url.length>1)var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+url+'">'+$link.text()+"</a></li>");else var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');$titleLi.find("h5>a").html(1==self.settings.custom_back_text?self.settings.back_text:"&laquo; "+$link.html()),$dropdown.prepend($titleLi)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(ul){var total=0,self=this;return ul.find("> li").each(function(){total+=self.outerHeight($(this),!0)}),total},sticky:function(){var $window=$(window),self=this;$window.scroll(function(){self.updateStickyPositioning()})},updateStickyPositioning:function(){var klass="."+this.settings.stickyClass,$window=$(window);if($(klass).length>0){var distance=this.settings.$topbar.data("stickyoffset");$(klass).hasClass("expanded")||($window.scrollTop()>distance?$(klass).hasClass("fixed")||($(klass).addClass("fixed"),$("body").addClass("f-topbar-fixed")):$window.scrollTop()<=distance&&$(klass).hasClass("fixed")&&($(klass).removeClass("fixed"),$("body").removeClass("f-topbar-fixed")))}},off:function(){$(this.scope).off(".fndtn.topbar"),$(window).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document);